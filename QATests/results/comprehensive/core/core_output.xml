<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 6.1.1 (Python 3.13.5 on darwin)" generated="20260111 15:55:02.923" rpa="false" schemaversion="4">
<suite id="s1" name="Auth">
<suite id="s1-s1" name="Auth" source="/Volumes/Stuff/Start Ups/MoranERP/QATests/auto_generated/auth">
<suite id="s1-s1-s1" name="Test Authentication" source="/Volumes/Stuff/Start Ups/MoranERP/QATests/auto_generated/auth/test_authentication.robot">
<kw name="Create Session" library="RequestsLibrary" type="SETUP">
<arg>api</arg>
<arg>${BASE_URL}</arg>
<doc>Create Session: create a HTTP session to a server</doc>
<msg timestamp="20260111 15:55:03.042" level="INFO">Creating Session using : alias=api, url=http://localhost:9000, headers={},                     cookies={}, auth=None, timeout=None, proxies=None, verify=False,                     debug=0 </msg>
<status status="PASS" starttime="20260111 15:55:03.041" endtime="20260111 15:55:03.042"/>
</kw>
<test id="s1-s1-s1-t1" name="Login With Tenant" line="18">
<kw name="Create Dictionary" library="BuiltIn">
<var>${payload}</var>
<arg>email=${TEST_EMAIL}</arg>
<arg>password=${TEST_PASSWORD}</arg>
<arg>tenant_id=${TEST_TENANT}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<msg timestamp="20260111 15:55:03.044" level="INFO">${payload} = {'email': 'admin@moranerp.com', 'password': 'admin123', 'tenant_id': 'TEN-KE-26-Z11N5'}</msg>
<status status="PASS" starttime="20260111 15:55:03.043" endtime="20260111 15:55:03.044"/>
</kw>
<kw name="POST On Session" library="RequestsLibrary">
<var>${response}</var>
<arg>api</arg>
<arg>/auth/v1/login-with-tenant</arg>
<arg>json=${payload}</arg>
<arg>expected_status=200</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<msg timestamp="20260111 15:55:03.189" level="INFO">POST Request : url=http://localhost:9000/auth/v1/login-with-tenant 
 path_url=/auth/v1/login-with-tenant 
 headers={'User-Agent': 'python-requests/2.32.3', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Content-Length': '87', 'Content-Type': 'application/json'} 
 body=b'{"email": "admin@moranerp.com", "password": "admin123", "tenant_id": "TEN-KE-26-Z11N5"}' 
 </msg>
<msg timestamp="20260111 15:55:03.189" level="INFO">POST Response : url=http://localhost:9000/auth/v1/login-with-tenant 
 status=401, reason=Unauthorized 
 headers={'date': 'Sun, 11 Jan 2026 12:55:02 GMT', 'server': 'uvicorn', 'content-length': '32', 'content-type': 'application/json'} 
 body={"detail":"Invalid credentials"} 
 </msg>
<msg timestamp="20260111 15:55:03.189" level="FAIL">Url: http://localhost:9000/auth/v1/login-with-tenant Expected status: 401 != 200</msg>
<status status="FAIL" starttime="20260111 15:55:03.044" endtime="20260111 15:55:03.194"/>
</kw>
<kw name="Dictionary Should Contain Key" library="Collections">
<arg>${response.json()}</arg>
<arg>access_token</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.194" endtime="20260111 15:55:03.194"/>
</kw>
<kw name="Dictionary Should Contain Key" library="Collections">
<arg>${response.json()}</arg>
<arg>token_type</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.194" endtime="20260111 15:55:03.194"/>
</kw>
<kw name="Dictionary Should Contain Key" library="Collections">
<arg>${response.json()}</arg>
<arg>tenant</arg>
<doc>Fails if ``key`` is not found from ``dictionary``.</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.194" endtime="20260111 15:55:03.194"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${response.json()['token_type']}</arg>
<arg>Bearer</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.194" endtime="20260111 15:55:03.194"/>
</kw>
<kw name="Should Not Be Empty" library="BuiltIn">
<arg>${response.json()['access_token']}</arg>
<doc>Verifies that the given item is not empty.</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.194" endtime="20260111 15:55:03.194"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${AUTH_TOKEN}</arg>
<arg>${response.json()['access_token']}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.195" endtime="20260111 15:55:03.195"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>Successfully authenticated and received token</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.195" endtime="20260111 15:55:03.195"/>
</kw>
<kw name="Verify User Exists In PostgreSQL" library="db_verification">
<var>${user_id}</var>
<arg>${TEST_EMAIL}</arg>
<doc>Verify user exists in PostgreSQL and return user ID</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.195" endtime="20260111 15:55:03.195"/>
</kw>
<kw name="Verify Tenant Membership" library="db_verification">
<var>${status}</var>
<var>${role}</var>
<arg>${user_id}</arg>
<arg>${TEST_TENANT}</arg>
<doc>Verify user has active membership in tenant</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.195" endtime="20260111 15:55:03.195"/>
</kw>
<kw name="Should Be Equal As Strings" library="BuiltIn">
<arg>${status}</arg>
<arg>ACTIVE</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.196" endtime="20260111 15:55:03.196"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>Database verification passed: User has ACTIVE membership with role ${role}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" starttime="20260111 15:55:03.196" endtime="20260111 15:55:03.196"/>
</kw>
<doc>Test POST /auth/v1/login-with-tenant - authenticate user and select tenant</doc>
<tag>authentication</tag>
<tag>auto-generated</tag>
<tag>phase_core</tag>
<tag>smoke</tag>
<status status="FAIL" starttime="20260111 15:55:03.042" endtime="20260111 15:55:03.196">Url: http://localhost:9000/auth/v1/login-with-tenant Expected status: 401 != 200</status>
</test>
<test id="s1-s1-s1-t2" name="Get User Memberships" line="51">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${AUTH_TOKEN}' == 'None'</arg>
<arg>Login With Tenant</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<msg timestamp="20260111 15:55:03.198" level="FAIL">Variable '${AUTH_TOKEN}' not found.</msg>
<status status="FAIL" starttime="20260111 15:55:03.197" endtime="20260111 15:55:03.198"/>
</kw>
<doc>Test GET /auth/me/memberships - retrieve user's tenant memberships</doc>
<tag>authentication</tag>
<tag>auto-generated</tag>
<tag>phase_core</tag>
<tag>smoke</tag>
<status status="FAIL" starttime="20260111 15:55:03.197" endtime="20260111 15:55:03.198">Setup failed:
Variable '${AUTH_TOKEN}' not found.</status>
</test>
<kw name="Delete All Sessions" library="RequestsLibrary" type="TEARDOWN">
<doc>Removes all the session objects</doc>
<msg timestamp="20260111 15:55:03.199" level="INFO">Deleting All Sessions</msg>
<status status="PASS" starttime="20260111 15:55:03.199" endtime="20260111 15:55:03.200"/>
</kw>
<doc>Auto-generated test for authentication endpoints</doc>
<status status="FAIL" starttime="20260111 15:55:02.934" endtime="20260111 15:55:03.200"/>
</suite>
<status status="FAIL" starttime="20260111 15:55:02.933" endtime="20260111 15:55:03.200"/>
</suite>
<status status="FAIL" starttime="20260111 15:55:02.923" endtime="20260111 15:55:03.200"/>
</suite>
<statistics>
<total>
<stat pass="0" fail="2" skip="0">All Tests</stat>
</total>
<tag>
<stat pass="0" fail="2" skip="0">authentication</stat>
<stat pass="0" fail="2" skip="0">auto-generated</stat>
<stat pass="0" fail="2" skip="0">phase_core</stat>
<stat pass="0" fail="2" skip="0">smoke</stat>
</tag>
<suite>
<stat pass="0" fail="2" skip="0" id="s1" name="Auth">Auth</stat>
<stat pass="0" fail="2" skip="0" id="s1-s1" name="Auth">Auth.Auth</stat>
<stat pass="0" fail="2" skip="0" id="s1-s1-s1" name="Test Authentication">Auth.Auth.Test Authentication</stat>
</suite>
</statistics>
<errors>
<msg timestamp="20260111 15:55:03.039" level="ERROR">Error in file '/Volumes/Stuff/Start Ups/MoranERP/QATests/resources/db_verification.robot' on line 3: Importing library 'DatabaseLibrary' failed: ModuleNotFoundError: No module named 'DatabaseLibrary'
Traceback (most recent call last):
  None
PYTHONPATH:
  /Library/Frameworks/Python.framework/Versions/3.13/bin
  /Library/Frameworks/Python.framework/Versions/3.13/lib/python313.zip
  /Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13
  /Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/lib-dynload
  /Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages</msg>
</errors>
</robot>
